/**
 * SubclassInstance - v0.1.0 - 2015-10-07
 * https://github.com/msdoom2011/subclassjs
 *
 * Copyright (c) 2015 Dmitriy Osipishin | msdoom2011@gmail.com
 */
!function(){"use strict";Subclass.Instance={},Subclass.Instance.Extension={},Subclass.ModuleInstance=function(){function a(a){this._module=a,this._events=[],this.registerEvent("onInitialize"),this.initializeExtensions(),this.getEvent("onInitialize").trigger()}return a.$parent=Subclass.Extendable,a.$mixins=[Subclass.Event.EventableMixin],a.prototype.getModule=function(){return this._module.getAPI()},a}(),Subclass.Instance.Extension.ModuleAPIExtension=function(){function a(b){a.$parent.apply(this,arguments)}a.$parent=Subclass.Extension;var b=Subclass.ModuleAPI;return b.prototype.onInstance=function(){return this.getModule().onInstance.apply(this.getModule(),arguments)},b.prototype.createInstance=function(){return this.getModule().createInstance.apply(this.getModule(),arguments)},Subclass.Module.onInitializeBefore(function(c,d){b=Subclass.Tools.buildClassConstructor(b),b.hasExtension(a)||b.registerExtension(a)}),a}(),Subclass.Instance.Extension.ModuleExtension=function(){function a(b){a.$parent.apply(this,arguments)}a.$parent=Subclass.Extension,a.initialize=function(a){this.$parent.initialize.apply(this,arguments);var b=a.getEventManager();b.registerEvent("onInstance")};var b=Subclass.Module;return b.prototype.onInstance=function(a){return this.getSettingsManager().setOnInstance(a),this},b.prototype.triggerOnInstance=function(a){a&&"object"==typeof a&&a instanceof Subclass.ModuleInstance||Subclass.Error.create("InvalidArgument").argument("the instance of module",!1).expected('an instance of class "Subclass.ModuleInstance"').received(a).apply();var b=this.getEventManager().getEvent("onInstance");return b.trigger.apply(b,arguments),this},b.prototype.createInstance=function(){this.isRoot()&&this.isReady()||Subclass.Error.create("Can't create instance of module which is a plugin or not ready.");for(var a=Subclass.Tools.createClassInstance(Subclass.ModuleInstance,this),b=[a],c=0;c<arguments.length;c++)b.push(arguments[c]);return this.triggerOnInstance.apply(this,b),a},Subclass.Module.onInitializeBefore(function(c,d){b=Subclass.Tools.buildClassConstructor(b),b.hasExtension(a)||b.registerExtension(a)}),a}(),Subclass.Instance.Extension.SettingsManagerExtension=function(){function a(b){a.$parent.apply(this,arguments)}a.$parent=Subclass.Extension;var b=Subclass.SettingsManager;return b.prototype.setOnInstance=function(a){this.checkModuleIsReady(),"function"!=typeof a&&Subclass.Error.create("InvalidArgument").argument("the onInstance event callback",!1).received(a).expected("a function").apply();var b=this.getModule().getEventManager(),c=b.getEvent("onInstance");c.addListener(a)},Subclass.Module.onInitializeBefore(function(c,d){b=Subclass.Tools.buildClassConstructor(b),b.hasExtension(a)||b.registerExtension(a)}),a}(),Subclass.registerPlugin(function(){function a(){a.$parent.call(this)}return a.$parent=Subclass.SubclassPlugin,a.getName=function(){return"SubclassInstance"},a}())}();